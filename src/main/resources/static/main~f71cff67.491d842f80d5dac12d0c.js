(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{AytR:function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));const u={production:!0}},krAy:function(e,r,t){"use strict";t.d(r,"a",(function(){return c}));var u=t("mrSG"),i=t("fXoL");let c=(()=>{class e{constructor(){}genGrids(e){let r=[];return r.push(...this.genPricesGtCurrentPrice(e)),r.push(...this.genPricesLteCurrentPrice(e)),r.sort((e,r)=>e.level-r.level),e.profitRun&&(r=r.map(r=>this.profitRun(r,e))),r.push(this.genSum(r)),r}genPricesGtCurrentPrice(r){const t=[];let u,i=1;do{const c=1+r.perGrid*i/100,l=1+r.perGrid*(i+1)/100;u=r.currentPrice*c,i++,t.push(e.createOneGrid(u,r.currentPrice*l,c,r))}while(u<r.maxGridPrice);return t}genPricesLteCurrentPrice(r){const t=[],u=r.maxLoss/r.perGrid;for(let i=0;i<u;i++){const u=1-r.perGrid*i/100;t.push(e.createOneGrid(r.currentPrice*u,r.currentPrice*(1-r.perGrid*(i-1)/100),u,r))}return t[0].benchmark=!0,t}genSum(e){const r={level:"\u5408\u8ba1",buyNum:e.map(e=>e.buyNum).reduce((e,r)=>e+r),buyPriceSum:e.map(e=>e.buyPriceSum).reduce((e,r)=>e+r),sellPriceSum:e.map(e=>e.sellPriceSum).reduce((e,r)=>e+r),sellNum:e.map(e=>e.sellNum).reduce((e,r)=>e+r),profit:e.map(e=>e.profit).reduce((e,r)=>e+r),leftProfitSum:e.map(e=>e.leftProfitSum).reduce((e,r)=>e+r)};return r.profitPercentage=r.profit/r.buyPriceSum*100,r}profitRun(r,t){var i=Object(u.a)(r,[]);const c=e.calLeftProfitNum(i.buyPrice,i.sellPrice,t);return i.leftNum=c,i.sellNum=i.buyNum-c,i.sellPriceSum=i.sellPrice*i.sellNum,i.leftProfitSellPrice=e.calLeftProfitSellPrice(i.sellPrice,t),i.leftProfitSum=i.leftNum*i.leftProfitSellPrice,i.profit=c*i.leftProfitSellPrice+i.sellPrice*i.sellNum-i.buyPriceSum,i.profitPercentage=i.profit/i.buyPriceSum*100,i}static calLeftProfitNum(e,r,t){return parseInt(((r-e)*t.buyNum/r).toFixed(0),10)*t.leftProfitMul}static calLeftProfitSellPrice(e,r){return console.log(r),Math.min(e*(100+r.maxProfitRunPercent)/100,r.maxProfitRunPrice)}static createOneGrid(e,r,t,u){const i={level:t,buyPrice:e,buyNum:u.buyNum,buyPriceSum:e*u.buyNum,sellPrice:r,sellNum:u.buyNum,sellPriceSum:u.buyNum*r};return i.profit=i.sellPriceSum-i.buyPriceSum,i.profitPercentage=i.profit/i.buyPriceSum*100,i}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);